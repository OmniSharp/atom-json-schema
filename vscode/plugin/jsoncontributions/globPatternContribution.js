'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.GlobPatternContribution = undefined;

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

var _strings = require('../utils/strings');

var _strings2 = _interopRequireDefault(_strings);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var globProperties = [{ type: "value", displayText: "Files by Extension", text: '"**/*.{{extension}}": true', description: 'Match all files of a specific file extension.' }, { type: "value", displayText: "Files with Multiple Extensions", text: '"**/*.{ext1,ext2,ext3}": true', description: 'Match all files with any of the file extensions.' }, { type: "value", displayText: "Files with Siblings by Name", text: '"**/*.{{source-extension}}": { "when": "$(basename).{{target-extension}}" }', description: 'Match files that have siblings with the same name but a different extension.' }, { type: "value", displayText: "Folder by Name (Top Level)", text: '"{{name}}": true', description: 'Match a top level folder with a specific name.' }, { type: "value", displayText: "Folders with Multiple Names (Top Level)", text: '"{folder1,folder2,folder3}": true', description: 'Match multiple top level folders.' }, { type: "value", displayText: "Folder by Name (Any Location)", text: '"**/{{name}}": true', description: 'Match a folder with a specific name in any location.' }];
var globValues = [{ type: "value", displayText: "True", text: 'true', description: "Enable the pattern." }, { type: "value", displayText: "False", text: 'false', description: "Disable the pattern." }, { type: "value", displayText: "Files with Siblings by Name", text: '{ "when": "$(basename).{{extension}}" }', description: 'Match files that have siblings with the same name but a different extension.' }];

var GlobPatternContribution = exports.GlobPatternContribution = function () {
    function GlobPatternContribution() {
        _classCallCheck(this, GlobPatternContribution);
    }

    _createClass(GlobPatternContribution, [{
        key: 'isSettingsFile',
        value: function isSettingsFile(resource) {
            return _strings2.default.endsWith(resource, '/settings.json');
        }
    }, {
        key: 'collectDefaultSuggestions',
        value: function collectDefaultSuggestions(resource, result) {
            return null;
        }
    }, {
        key: 'collectPropertySuggestions',
        value: function collectPropertySuggestions(resource, location, currentWord, addValue, isLast, result) {
            if (this.isSettingsFile(resource) && (location.matches(['files.exclude']) || location.matches(['search.exclude']))) {
                globProperties.forEach(function (e) {
                    return result.add(e);
                });
            }
            return null;
        }
    }, {
        key: 'collectValueSuggestions',
        value: function collectValueSuggestions(resource, location, currentKey, result) {
            if (this.isSettingsFile(resource) && (location.matches(['files.exclude']) || location.matches(['search.exclude']))) {
                globValues.forEach(function (e) {
                    return result.add(e);
                });
            }
            return null;
        }
    }, {
        key: 'getInfoContribution',
        value: function getInfoContribution(resource, location) {
            return null;
        }
    }]);

    return GlobPatternContribution;
}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZzY29kZS9wbHVnaW4vanNvbmNvbnRyaWJ1dGlvbnMvZ2xvYlBhdHRlcm5Db250cmlidXRpb24udHMiLCJ2c2NvZGUvcGx1Z2luL2pzb25jb250cmlidXRpb25zL2dsb2JQYXR0ZXJuQ29udHJpYnV0aW9uLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUlBOzs7Ozs7Ozs7QUNIQTs7Ozs7Ozs7QURTQSxJQUFJLGlCQUErQixDQUMvQixFQUFFLE1BQU0sT0FBUixFQUFpQixhQUFhLG9CQUE5QixFQUFvRCxNQUFNLDRCQUExRCxFQUF3Riw0REFBeEYsRUFEK0IsRUFFL0IsRUFBRSxNQUFNLE9BQVIsRUFBaUIsYUFBYSxnQ0FBOUIsRUFBZ0UsTUFBTSwrQkFBdEUsRUFBdUcsK0RBQXZHLEVBRitCLEVBRy9CLEVBQUUsTUFBTSxPQUFSLEVBQWlCLGFBQWEsNkJBQTlCLEVBQTZELE1BQU0sNkVBQW5FLEVBQWtKLDJGQUFsSixFQUgrQixFQUkvQixFQUFFLE1BQU0sT0FBUixFQUFpQixhQUFhLDRCQUE5QixFQUE0RCxNQUFNLGtCQUFsRSxFQUFzRiw2REFBdEYsRUFKK0IsRUFLL0IsRUFBRSxNQUFNLE9BQVIsRUFBaUIsYUFBYSx5Q0FBOUIsRUFBeUUsTUFBTSxtQ0FBL0UsRUFBb0gsZ0RBQXBILEVBTCtCLEVBTS9CLEVBQUUsTUFBTSxPQUFSLEVBQWlCLGFBQWEsK0JBQTlCLEVBQStELE1BQU0scUJBQXJFLEVBQTRGLG1FQUE1RixFQU4rQixDQUFuQztBQVNBLElBQUksYUFBMkIsQ0FDM0IsRUFBRSxNQUFNLE9BQVIsRUFBaUIsYUFBYSxNQUE5QixFQUFzQyxNQUFNLE1BQTVDLEVBQW9ELGFBQWEscUJBQWpFLEVBRDJCLEVBRTNCLEVBQUUsTUFBTSxPQUFSLEVBQWlCLGFBQWEsT0FBOUIsRUFBdUMsTUFBTSxPQUE3QyxFQUFzRCxhQUFhLHNCQUFuRSxFQUYyQixFQUczQixFQUFFLE1BQU0sT0FBUixFQUFpQixhQUFhLDZCQUE5QixFQUE2RCxNQUFNLHlDQUFuRSxFQUE4RywyRkFBOUcsRUFIMkIsQ0FBL0I7O0lBTUEsdUIsV0FBQSx1QjtBQUVJLHVDQUFBO0FBQUE7QUFDQzs7Ozt1Q0FFc0IsUSxFQUFnQjtBQUNuQyxtQkFBTyxrQkFBUSxRQUFSLENBQWlCLFFBQWpCLEVBQTJCLGdCQUEzQixDQUFQO0FBQ0g7OztrREFFZ0MsUSxFQUFrQixNLEVBQTZCO0FBQzVFLG1CQUFPLElBQVA7QUFDSDs7O21EQUVpQyxRLEVBQWtCLFEsRUFBd0IsVyxFQUFxQixRLEVBQW1CLE0sRUFBaUIsTSxFQUE2QjtBQUM5SixnQkFBSSxLQUFLLGNBQUwsQ0FBb0IsUUFBcEIsTUFBa0MsU0FBUyxPQUFULENBQWlCLENBQUMsZUFBRCxDQUFqQixLQUF1QyxTQUFTLE9BQVQsQ0FBaUIsQ0FBQyxnQkFBRCxDQUFqQixDQUF6RSxDQUFKLEVBQW9IO0FBQ2hILCtCQUFlLE9BQWYsQ0FBdUIsVUFBQyxDQUFEO0FBQUEsMkJBQU8sT0FBTyxHQUFQLENBQVcsQ0FBWCxDQUFQO0FBQUEsaUJBQXZCO0FBQ0g7QUFFRCxtQkFBTyxJQUFQO0FBQ0g7OztnREFFOEIsUSxFQUFrQixRLEVBQXdCLFUsRUFBb0IsTSxFQUE2QjtBQUN0SCxnQkFBSSxLQUFLLGNBQUwsQ0FBb0IsUUFBcEIsTUFBa0MsU0FBUyxPQUFULENBQWlCLENBQUMsZUFBRCxDQUFqQixLQUF1QyxTQUFTLE9BQVQsQ0FBaUIsQ0FBQyxnQkFBRCxDQUFqQixDQUF6RSxDQUFKLEVBQW9IO0FBQ2hILDJCQUFXLE9BQVgsQ0FBbUIsVUFBQyxDQUFEO0FBQUEsMkJBQU8sT0FBTyxHQUFQLENBQVcsQ0FBWCxDQUFQO0FBQUEsaUJBQW5CO0FBQ0g7QUFFRCxtQkFBTyxJQUFQO0FBQ0g7Ozs0Q0FFMEIsUSxFQUFrQixRLEVBQXNCO0FBQy9ELG1CQUFPLElBQVA7QUFDSCIsImZpbGUiOiJ2c2NvZGUvcGx1Z2luL2pzb25jb250cmlidXRpb25zL2dsb2JQYXR0ZXJuQ29udHJpYnV0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cclxuICogIENvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxyXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLiBTZWUgTGljZW5zZS50eHQgaW4gdGhlIHByb2plY3Qgcm9vdCBmb3IgbGljZW5zZSBpbmZvcm1hdGlvbi5cclxuICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXHJcbid1c2Ugc3RyaWN0JztcclxuXHJcbmltcG9ydCBTdHJpbmdzIGZyb20gJy4uL3V0aWxzL3N0cmluZ3MnO1xyXG5pbXBvcnQge0lKU09OV29ya2VyQ29udHJpYnV0aW9uLCBJU3VnZ2VzdGlvbnNDb2xsZWN0b3J9IGZyb20gJy4uL2pzb25Db250cmlidXRpb25zJztcclxuaW1wb3J0IHtKU09OTG9jYXRpb259IGZyb20gJy4uL2pzb25Mb2NhdGlvbic7XHJcblxyXG5sZXQgZ2xvYlByb3BlcnRpZXM6IFN1Z2dlc3Rpb25bXSA9IFtcclxuICAgIHsgdHlwZTogXCJ2YWx1ZVwiLCBkaXNwbGF5VGV4dDogXCJGaWxlcyBieSBFeHRlbnNpb25cIiwgdGV4dDogJ1wiKiovKi57e2V4dGVuc2lvbn19XCI6IHRydWUnLCBkZXNjcmlwdGlvbjogYE1hdGNoIGFsbCBmaWxlcyBvZiBhIHNwZWNpZmljIGZpbGUgZXh0ZW5zaW9uLmAgfSxcclxuICAgIHsgdHlwZTogXCJ2YWx1ZVwiLCBkaXNwbGF5VGV4dDogXCJGaWxlcyB3aXRoIE11bHRpcGxlIEV4dGVuc2lvbnNcIiwgdGV4dDogJ1wiKiovKi57ZXh0MSxleHQyLGV4dDN9XCI6IHRydWUnLCBkZXNjcmlwdGlvbjogYE1hdGNoIGFsbCBmaWxlcyB3aXRoIGFueSBvZiB0aGUgZmlsZSBleHRlbnNpb25zLmAgfSxcclxuICAgIHsgdHlwZTogXCJ2YWx1ZVwiLCBkaXNwbGF5VGV4dDogXCJGaWxlcyB3aXRoIFNpYmxpbmdzIGJ5IE5hbWVcIiwgdGV4dDogJ1wiKiovKi57e3NvdXJjZS1leHRlbnNpb259fVwiOiB7IFwid2hlblwiOiBcIiQoYmFzZW5hbWUpLnt7dGFyZ2V0LWV4dGVuc2lvbn19XCIgfScsIGRlc2NyaXB0aW9uOiBgTWF0Y2ggZmlsZXMgdGhhdCBoYXZlIHNpYmxpbmdzIHdpdGggdGhlIHNhbWUgbmFtZSBidXQgYSBkaWZmZXJlbnQgZXh0ZW5zaW9uLmAgfSxcclxuICAgIHsgdHlwZTogXCJ2YWx1ZVwiLCBkaXNwbGF5VGV4dDogXCJGb2xkZXIgYnkgTmFtZSAoVG9wIExldmVsKVwiLCB0ZXh0OiAnXCJ7e25hbWV9fVwiOiB0cnVlJywgZGVzY3JpcHRpb246IGBNYXRjaCBhIHRvcCBsZXZlbCBmb2xkZXIgd2l0aCBhIHNwZWNpZmljIG5hbWUuYCB9LFxyXG4gICAgeyB0eXBlOiBcInZhbHVlXCIsIGRpc3BsYXlUZXh0OiBcIkZvbGRlcnMgd2l0aCBNdWx0aXBsZSBOYW1lcyAoVG9wIExldmVsKVwiLCB0ZXh0OiAnXCJ7Zm9sZGVyMSxmb2xkZXIyLGZvbGRlcjN9XCI6IHRydWUnLCBkZXNjcmlwdGlvbjogYE1hdGNoIG11bHRpcGxlIHRvcCBsZXZlbCBmb2xkZXJzLmAgfSxcclxuICAgIHsgdHlwZTogXCJ2YWx1ZVwiLCBkaXNwbGF5VGV4dDogXCJGb2xkZXIgYnkgTmFtZSAoQW55IExvY2F0aW9uKVwiLCB0ZXh0OiAnXCIqKi97e25hbWV9fVwiOiB0cnVlJywgZGVzY3JpcHRpb246IGBNYXRjaCBhIGZvbGRlciB3aXRoIGEgc3BlY2lmaWMgbmFtZSBpbiBhbnkgbG9jYXRpb24uYCB9LFxyXG5dO1xyXG5cclxubGV0IGdsb2JWYWx1ZXM6IFN1Z2dlc3Rpb25bXSA9IFtcclxuICAgIHsgdHlwZTogXCJ2YWx1ZVwiLCBkaXNwbGF5VGV4dDogXCJUcnVlXCIsIHRleHQ6ICd0cnVlJywgZGVzY3JpcHRpb246IFwiRW5hYmxlIHRoZSBwYXR0ZXJuLlwiIH0sXHJcbiAgICB7IHR5cGU6IFwidmFsdWVcIiwgZGlzcGxheVRleHQ6IFwiRmFsc2VcIiwgdGV4dDogJ2ZhbHNlJywgZGVzY3JpcHRpb246IFwiRGlzYWJsZSB0aGUgcGF0dGVybi5cIiB9LFxyXG4gICAgeyB0eXBlOiBcInZhbHVlXCIsIGRpc3BsYXlUZXh0OiBcIkZpbGVzIHdpdGggU2libGluZ3MgYnkgTmFtZVwiLCB0ZXh0OiAneyBcIndoZW5cIjogXCIkKGJhc2VuYW1lKS57e2V4dGVuc2lvbn19XCIgfScsIGRlc2NyaXB0aW9uOiBgTWF0Y2ggZmlsZXMgdGhhdCBoYXZlIHNpYmxpbmdzIHdpdGggdGhlIHNhbWUgbmFtZSBidXQgYSBkaWZmZXJlbnQgZXh0ZW5zaW9uLmAgfVxyXG5dO1xyXG5cclxuZXhwb3J0IGNsYXNzIEdsb2JQYXR0ZXJuQ29udHJpYnV0aW9uIGltcGxlbWVudHMgSUpTT05Xb3JrZXJDb250cmlidXRpb24ge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgaXNTZXR0aW5nc0ZpbGUocmVzb3VyY2U6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiBTdHJpbmdzLmVuZHNXaXRoKHJlc291cmNlLCAnL3NldHRpbmdzLmpzb24nKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY29sbGVjdERlZmF1bHRTdWdnZXN0aW9ucyhyZXNvdXJjZTogc3RyaW5nLCByZXN1bHQ6IElTdWdnZXN0aW9uc0NvbGxlY3Rvcik6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNvbGxlY3RQcm9wZXJ0eVN1Z2dlc3Rpb25zKHJlc291cmNlOiBzdHJpbmcsIGxvY2F0aW9uOiBKU09OTG9jYXRpb24sIGN1cnJlbnRXb3JkOiBzdHJpbmcsIGFkZFZhbHVlOiBib29sZWFuLCBpc0xhc3Q6IGJvb2xlYW4sIHJlc3VsdDogSVN1Z2dlc3Rpb25zQ29sbGVjdG9yKTogUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICBpZiAodGhpcy5pc1NldHRpbmdzRmlsZShyZXNvdXJjZSkgJiYgKGxvY2F0aW9uLm1hdGNoZXMoWydmaWxlcy5leGNsdWRlJ10pIHx8IGxvY2F0aW9uLm1hdGNoZXMoWydzZWFyY2guZXhjbHVkZSddKSkpIHtcclxuICAgICAgICAgICAgZ2xvYlByb3BlcnRpZXMuZm9yRWFjaCgoZSkgPT4gcmVzdWx0LmFkZChlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgY29sbGVjdFZhbHVlU3VnZ2VzdGlvbnMocmVzb3VyY2U6IHN0cmluZywgbG9jYXRpb246IEpTT05Mb2NhdGlvbiwgY3VycmVudEtleTogc3RyaW5nLCByZXN1bHQ6IElTdWdnZXN0aW9uc0NvbGxlY3Rvcik6IFByb21pc2U8YW55PiB7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNTZXR0aW5nc0ZpbGUocmVzb3VyY2UpICYmIChsb2NhdGlvbi5tYXRjaGVzKFsnZmlsZXMuZXhjbHVkZSddKSB8fCBsb2NhdGlvbi5tYXRjaGVzKFsnc2VhcmNoLmV4Y2x1ZGUnXSkpKSB7XHJcbiAgICAgICAgICAgIGdsb2JWYWx1ZXMuZm9yRWFjaCgoZSkgPT4gcmVzdWx0LmFkZChlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SW5mb0NvbnRyaWJ1dGlvbihyZXNvdXJjZTogc3RyaW5nLCBsb2NhdGlvbjogSlNPTkxvY2F0aW9uKTogUHJvbWlzZTxNYXJrZWRTdHJpbmdbXT4ge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59IiwiJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IFN0cmluZ3MgZnJvbSAnLi4vdXRpbHMvc3RyaW5ncyc7XG5sZXQgZ2xvYlByb3BlcnRpZXMgPSBbXG4gICAgeyB0eXBlOiBcInZhbHVlXCIsIGRpc3BsYXlUZXh0OiBcIkZpbGVzIGJ5IEV4dGVuc2lvblwiLCB0ZXh0OiAnXCIqKi8qLnt7ZXh0ZW5zaW9ufX1cIjogdHJ1ZScsIGRlc2NyaXB0aW9uOiBgTWF0Y2ggYWxsIGZpbGVzIG9mIGEgc3BlY2lmaWMgZmlsZSBleHRlbnNpb24uYCB9LFxuICAgIHsgdHlwZTogXCJ2YWx1ZVwiLCBkaXNwbGF5VGV4dDogXCJGaWxlcyB3aXRoIE11bHRpcGxlIEV4dGVuc2lvbnNcIiwgdGV4dDogJ1wiKiovKi57ZXh0MSxleHQyLGV4dDN9XCI6IHRydWUnLCBkZXNjcmlwdGlvbjogYE1hdGNoIGFsbCBmaWxlcyB3aXRoIGFueSBvZiB0aGUgZmlsZSBleHRlbnNpb25zLmAgfSxcbiAgICB7IHR5cGU6IFwidmFsdWVcIiwgZGlzcGxheVRleHQ6IFwiRmlsZXMgd2l0aCBTaWJsaW5ncyBieSBOYW1lXCIsIHRleHQ6ICdcIioqLyoue3tzb3VyY2UtZXh0ZW5zaW9ufX1cIjogeyBcIndoZW5cIjogXCIkKGJhc2VuYW1lKS57e3RhcmdldC1leHRlbnNpb259fVwiIH0nLCBkZXNjcmlwdGlvbjogYE1hdGNoIGZpbGVzIHRoYXQgaGF2ZSBzaWJsaW5ncyB3aXRoIHRoZSBzYW1lIG5hbWUgYnV0IGEgZGlmZmVyZW50IGV4dGVuc2lvbi5gIH0sXG4gICAgeyB0eXBlOiBcInZhbHVlXCIsIGRpc3BsYXlUZXh0OiBcIkZvbGRlciBieSBOYW1lIChUb3AgTGV2ZWwpXCIsIHRleHQ6ICdcInt7bmFtZX19XCI6IHRydWUnLCBkZXNjcmlwdGlvbjogYE1hdGNoIGEgdG9wIGxldmVsIGZvbGRlciB3aXRoIGEgc3BlY2lmaWMgbmFtZS5gIH0sXG4gICAgeyB0eXBlOiBcInZhbHVlXCIsIGRpc3BsYXlUZXh0OiBcIkZvbGRlcnMgd2l0aCBNdWx0aXBsZSBOYW1lcyAoVG9wIExldmVsKVwiLCB0ZXh0OiAnXCJ7Zm9sZGVyMSxmb2xkZXIyLGZvbGRlcjN9XCI6IHRydWUnLCBkZXNjcmlwdGlvbjogYE1hdGNoIG11bHRpcGxlIHRvcCBsZXZlbCBmb2xkZXJzLmAgfSxcbiAgICB7IHR5cGU6IFwidmFsdWVcIiwgZGlzcGxheVRleHQ6IFwiRm9sZGVyIGJ5IE5hbWUgKEFueSBMb2NhdGlvbilcIiwgdGV4dDogJ1wiKiove3tuYW1lfX1cIjogdHJ1ZScsIGRlc2NyaXB0aW9uOiBgTWF0Y2ggYSBmb2xkZXIgd2l0aCBhIHNwZWNpZmljIG5hbWUgaW4gYW55IGxvY2F0aW9uLmAgfSxcbl07XG5sZXQgZ2xvYlZhbHVlcyA9IFtcbiAgICB7IHR5cGU6IFwidmFsdWVcIiwgZGlzcGxheVRleHQ6IFwiVHJ1ZVwiLCB0ZXh0OiAndHJ1ZScsIGRlc2NyaXB0aW9uOiBcIkVuYWJsZSB0aGUgcGF0dGVybi5cIiB9LFxuICAgIHsgdHlwZTogXCJ2YWx1ZVwiLCBkaXNwbGF5VGV4dDogXCJGYWxzZVwiLCB0ZXh0OiAnZmFsc2UnLCBkZXNjcmlwdGlvbjogXCJEaXNhYmxlIHRoZSBwYXR0ZXJuLlwiIH0sXG4gICAgeyB0eXBlOiBcInZhbHVlXCIsIGRpc3BsYXlUZXh0OiBcIkZpbGVzIHdpdGggU2libGluZ3MgYnkgTmFtZVwiLCB0ZXh0OiAneyBcIndoZW5cIjogXCIkKGJhc2VuYW1lKS57e2V4dGVuc2lvbn19XCIgfScsIGRlc2NyaXB0aW9uOiBgTWF0Y2ggZmlsZXMgdGhhdCBoYXZlIHNpYmxpbmdzIHdpdGggdGhlIHNhbWUgbmFtZSBidXQgYSBkaWZmZXJlbnQgZXh0ZW5zaW9uLmAgfVxuXTtcbmV4cG9ydCBjbGFzcyBHbG9iUGF0dGVybkNvbnRyaWJ1dGlvbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgfVxuICAgIGlzU2V0dGluZ3NGaWxlKHJlc291cmNlKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmdzLmVuZHNXaXRoKHJlc291cmNlLCAnL3NldHRpbmdzLmpzb24nKTtcbiAgICB9XG4gICAgY29sbGVjdERlZmF1bHRTdWdnZXN0aW9ucyhyZXNvdXJjZSwgcmVzdWx0KSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb2xsZWN0UHJvcGVydHlTdWdnZXN0aW9ucyhyZXNvdXJjZSwgbG9jYXRpb24sIGN1cnJlbnRXb3JkLCBhZGRWYWx1ZSwgaXNMYXN0LCByZXN1bHQpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTZXR0aW5nc0ZpbGUocmVzb3VyY2UpICYmIChsb2NhdGlvbi5tYXRjaGVzKFsnZmlsZXMuZXhjbHVkZSddKSB8fCBsb2NhdGlvbi5tYXRjaGVzKFsnc2VhcmNoLmV4Y2x1ZGUnXSkpKSB7XG4gICAgICAgICAgICBnbG9iUHJvcGVydGllcy5mb3JFYWNoKChlKSA9PiByZXN1bHQuYWRkKGUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29sbGVjdFZhbHVlU3VnZ2VzdGlvbnMocmVzb3VyY2UsIGxvY2F0aW9uLCBjdXJyZW50S2V5LCByZXN1bHQpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNTZXR0aW5nc0ZpbGUocmVzb3VyY2UpICYmIChsb2NhdGlvbi5tYXRjaGVzKFsnZmlsZXMuZXhjbHVkZSddKSB8fCBsb2NhdGlvbi5tYXRjaGVzKFsnc2VhcmNoLmV4Y2x1ZGUnXSkpKSB7XG4gICAgICAgICAgICBnbG9iVmFsdWVzLmZvckVhY2goKGUpID0+IHJlc3VsdC5hZGQoZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBnZXRJbmZvQ29udHJpYnV0aW9uKHJlc291cmNlLCBsb2NhdGlvbikge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
